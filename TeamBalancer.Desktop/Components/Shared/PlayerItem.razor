@using TeamBalancer.Core.Models

<div class="player-item">
    <label class="player-checkbox">
        <input type="checkbox"
               checked="@IsSelected"
               @onchange="@((e) => HandleSelectionChanged((bool)e.Value!))" />
        <div class="player-info">
            <div class="player-name">@Player.Name</div>
            <div class="player-skills">
                <SkillRatingDisplay Rating="@Player.Speed" />
                <SkillRatingDisplay Rating="@Player.TechnicalSkills" />
                <SkillRatingDisplay Rating="@Player.Stamina" />
            </div>
        </div>
    </label>

    @if (ShowDeleteButton)
    {
        <button class="delete-button" @onclick="HandleDelete" @onclick:stopPropagation="true" title="Delete player">
            <i class="fas fa-times"></i>
        </button>
    }
</div>

@code {
    [Parameter, EditorRequired]
    public Player Player { get; set; } = null!;

    [Parameter]
    public bool IsSelected { get; set; }

    [Parameter]
    public bool ShowDeleteButton { get; set; } = false;

    [Parameter]
    public EventCallback<bool> OnSelectionChanged { get; set; }

    [Parameter]
    public EventCallback<Player> OnDelete { get; set; }

    private async Task HandleSelectionChanged(bool isSelected)
    {
        await OnSelectionChanged.InvokeAsync(isSelected);
    }

    private async Task HandleDelete()
    {
        await OnDelete.InvokeAsync(Player);
    }
}
